# Benchmarking _libtensor_

## Prerequisites

- C++ compiler with C++17 support (e.g. GCC >= 7.0, Clang >= 5.0, MSVC >= 19.14)
- CMake 3.12 or newer
- Accessible to GitHub (you may need certain software to provide a stable network connection)

## Getting started

### 1. Understand the project structure

- [`src`](src): source code of your implementation, and an additional conversion layer
    - [`api.hpp`](src/benchmark/api.hpp): an adapter that converts the interface of your implementation to the
      interface of the benchmarking framework, enabling the framework to call your implementation.
      > To make it easy for everyone, we use extremely simple argument types, and you need to convert them to your
      > implementation's argument types. If you provide an elegant API, please introduce them during the presentation
      > and may be evaluated as a bonus.
- [`test`](test): test cases (data are randomly generated by xtensor library in each run)

### 2. Migrate your code

1. Copy all your source code to [`src`](src).

2. Merge the `CMakeLists.txt` with your original one (include your build logic into the provided one, but do not include
   a `project()` declaration as we want it to be a subproject). You should make sure that the subproject builds a shared
   library named `libtensor`, and include `benchmark/api.hpp` publicly.

3. Implement all functions in [`api.hpp`](src/benchmark/api.hpp). You can define the function inplace, or
   define them in a `.tpp` file and include it in the bottom of the header.

### 3. Build manifests & run benchmarks

```shell
cmake . -Wno-dev -B build
cmake --build build -j4
cd build && ctest
```
